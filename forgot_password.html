<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VIZARYON useradmin password reset</title>

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet" />

<style>
    body {
        margin: 0;
        background-color: #0E0E11;
        font-family: Arial, sans-serif;
        color: white;
    }

    .header {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 23px;
        font-weight: bold;
        padding: 20px;
    }

    .material-symbols-rounded {
        font-variation-settings: 
            'FILL' 1, 
            'wght' 400, 
            'GRAD' 0, 
            'opsz' 24;
    }

    .back-btn {
        position: absolute;
        right: 15px;
        top: 15px;
        padding: 10px 18px;
        border-radius: 10px;
        border: 1px solid #ff4b4b;
        background: transparent;
        color: #ff4b4b;
        font-size: 16px;
    }

    .container {
        width: 90%;
        margin: auto;
        margin-top: 50px;
        text-align: center;
    }

    input {
        width: 90%;
        padding: 15px;
        margin-top: 10px;
        border-radius: 10px;
        border: none;
        background-color: #1C1C22;
        color: white;
        font-size: 16px;
    }

    .btn {
        width: 90%;
        padding: 15px;
        background-color: #ff3838;
        border: none;
        color: white;
        font-size: 18px;
        margin-top: 20px;
        border-radius: 10px;
    }

    #message {
        margin-top: 20px;
        font-size: 14px;
        color: #ff4b4b;
    }
</style>
</head>

<body>

<!-- Header with real icon -->
<div class="header">
    <span class="material-symbols-rounded" style="font-size:26px; color:#ff4b4b;">lock</span>
    Password Reset
    <button class="back-btn" onclick="history.back()">Back</button>
</div>

<div class="container">
    <p>Enter your registered email to continue.</p>

    <input type="email" id="email" placeholder="Email address">
    <button class="btn" onclick="sendCode()">Send Verification Code</button>
    
    <p id="message"></p>
</div>

<!-- Firebase -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAUXgsSYWudulsBHeXeZUNsJ6nPLKfNqVc",
        authDomain: "vizaryon-301bd.firebaseapp.com",
        projectId: "vizaryon-301bd",
        storageBucket: "vizaryon-301bd.firebasestorage.app",
        messagingSenderId: "748332923160",
        appId: "1:748332923160:web:3d7b7818b7a75265b2066d"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.sendCode = function () {
        const email = document.getElementById("email").value;
        const msg = document.getElementById("message");

        if (!email) {
            msg.innerHTML = "‚ö† Please enter an email.";
            return;
        }

        sendPasswordResetEmail(auth, email)
            .then(() => {
                msg.style.color = "lightgreen";
                msg.innerHTML = "üì© Reset email sent! Check your inbox.";
            })
            .catch(error => {
                msg.style.color = "#ff4b4b";
                
                if (error.code === "auth/user-not-found") {
                    msg.innerHTML = "‚ùå No account found with this email.";
                } else if (error.code === "auth/invalid-email") {
                    msg.innerHTML = "‚ö† Invalid email format.";
                } else {
                    msg.innerHTML = "‚ö† Error: " + error.message;
                }
            });
    };
</script>

</body>
</html>
