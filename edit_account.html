<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIZARYON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        body { background-color: #111827; color: #f3f4f6; }
        .red-text { color: #dc2626; }
        .red-bg { background-color: #dc2626; }

        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background-color: #1f2937; border: 1px solid #10b981; color: #10b981;
            padding: 12px 20px; border-radius: 8px; display: none;
        }
        .delete-toast { border-color: #dc2626; color: #dc2626; }

        .modal-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.65); display: none; justify-content: center;
            align-items: center; z-index: 50;
        }

        .modal {
            background:#1f2937; padding:25px; width:90%; max-width:380px;
            border-radius:10px; text-align:center;
        }

        input, textarea { 
            background-color: #1f2937; 
            border: 1px solid #374151; 
        }
        input:focus, textarea:focus { border-color: #dc2626; outline: none; }
    </style>
</head>

<body class="min-h-screen px-6">

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- Delete Modal Step 1 -->
    <div id="deleteModal1" class="modal-bg">
        <div class="modal">
            <h2 class="text-xl font-bold mb-3 text-red-400">Delete Account?</h2>
            <p class="text-gray-300 mb-6">This action cannot be undone.</p>

            <div class="flex space-x-4">
                <button onclick="closeModals()" class="flex-1 border border-gray-500 py-2 rounded-lg hover:bg-gray-700">Cancel</button>
                <button onclick="stepTwoDelete()" class="flex-1 red-bg py-2 rounded-lg hover:bg-red-700">Continue</button>
            </div>
        </div>
    </div>

    <!-- Delete Modal Step 2 -->
    <div id="deleteModal2" class="modal-bg">
        <div class="modal">
            <h2 class="text-lg font-bold mb-3 text-red-400">Confirm Password</h2>
            <input type="password" id="confirmPassword" placeholder="Enter your password"
            class="w-full px-4 py-3 rounded-lg mb-5"/>

            <div class="flex space-x-4">
                <button onclick="closeModals()" class="flex-1 border border-gray-500 py-2 rounded-lg hover:bg-gray-700">Cancel</button>
                <button onclick="finalDelete()" class="flex-1 red-bg py-2 rounded-lg hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>

    <!-- Nav -->
    <nav class="fixed top-0 left-0 w-full shadow-md px-6 py-4 flex justify-between items-center z-50">
        <div class="flex items-center space-x-3">
            <i data-feather="edit-3" class="red-text"></i>
            <span class="text-xl font-bold">Edit Account</span>
        </div>
        <button onclick="window.location.href='settings.html'" class="border border-red-600 text-red-400 px-5 py-2 rounded-lg hover:bg-red-900 transition">Back</button>
    </nav>

    <!-- Content -->
    <section class="container mx-auto pt-28 max-w-xl">

        <!-- Avatar -->
        <div class="text-center mb-10">
            <div id="profilePreview" class="mx-auto bg-gray-600 w-24 h-24 rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden">
                ðŸ‘¤
            </div>
            <input type="file" id="fileInput" accept="image/*" class="hidden">
            <button onclick="document.getElementById('fileInput').click()" class="mt-4 border border-gray-600 px-5 py-2 rounded-lg hover:bg-gray-700 transition">Change Profile Picture</button>
        </div>

        <!-- Form -->
        <div class="space-y-6">
            
            <div>
                <label class="text-gray-300 text-sm">Display Name</label>
                <input id="name" type="text" placeholder="Write your display name here..." class="w-full px-4 py-3 rounded-lg mt-2">
            </div>

            <div>
                <label class="text-gray-300 text-sm">Username</label>
                <input id="username" type="text" placeholder="Write your username here..." class="w-full px-4 py-3 rounded-lg mt-2">
            </div>

            <div>
                <label class="text-gray-300 text-sm">Email</label>
                <input id="email" type="email" placeholder="user@email.com" class="w-full px-4 py-3 rounded-lg mt-2">
            </div>

            <div>
                <label class="text-gray-300 text-sm">Bio</label>
                <textarea id="bio" placeholder="Write something about you..." class="w-full px-4 py-3 rounded-lg mt-2 h-28 bg-gray-800 border border-gray-600"></textarea>
            </div>

        </div>

        <!-- Save Button -->
        <button onclick="saveProfile()" class="w-full mt-10 py-3 rounded-lg text-lg font-semibold red-bg hover:bg-red-700 transition">
            Save Changes
        </button>

        <!-- Delete Button -->
        <button onclick="deleteAccount()" class="w-full mt-4 py-3 text-red-400 border border-red-600 rounded-lg hover:bg-red-900 hover:text-white transition">
            Delete Account
        </button>
    </section>

<script>
feather.replace();

// Load user data
window.onload = () => {
    document.getElementById("name").value = localStorage.getItem("name") || "";
    document.getElementById("username").value = localStorage.getItem("username") || "";
    document.getElementById("email").value = localStorage.getItem("email") || "";
    document.getElementById("bio").value = localStorage.getItem("bio") || "";

    const savedImg = localStorage.getItem("profilePic");
    const preview = document.getElementById("profilePreview");

    if (savedImg) {
        preview.innerHTML = `<img src="${savedImg}" class="w-full h-full object-cover rounded-full"/>`;
    }
};

function showToast(message, error=false){
    const toast = document.getElementById("toast");
    toast.innerText = message;
    toast.style.display = "block";
    error ? toast.classList.add("delete-toast") : toast.classList.remove("delete-toast");
    setTimeout(() => toast.style.display = "none", 2500);
}

// Save profile
function saveProfile(){
    localStorage.setItem("name", document.getElementById("name").value);
    localStorage.setItem("username", document.getElementById("username").value);
    localStorage.setItem("email", document.getElementById("email").value);
    localStorage.setItem("bio", document.getElementById("bio").value);
    showToast("Profile Updated Successfully!");
}

// Delete logic
function deleteAccount() {
    document.getElementById("deleteModal1").style.display = "flex";
}

function stepTwoDelete() {
    document.getElementById("deleteModal1").style.display = "none";
    document.getElementById("deleteModal2").style.display = "flex";
}

function finalDelete() {
    if (!document.getElementById("confirmPassword").value.trim()) return showToast("Password Required", true);

    localStorage.clear();
    closeModals();
    showToast("Account Deleted Successfully", true);

    setTimeout(() => window.location.href = "index.html", 1500);
}

function closeModals() {
    document.getElementById("deleteModal1").style.display = "none";
    document.getElementById("deleteModal2").style.display = "none";
}

// Profile Picture Preview
document.getElementById("fileInput").addEventListener("change", function () {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
        localStorage.setItem("profilePic", reader.result);
        document.getElementById("profilePreview").innerHTML = `<img src="${reader.result}" class="w-full h-full object-cover rounded-full"/>`;
    };
    reader.readAsDataURL(file);
});
</script>

</body>
</html>
